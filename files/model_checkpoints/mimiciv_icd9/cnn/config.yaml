seed: 1337
deterministic: false
gpu: -1
name: null
experiments_dir: /data/je/experiments
debug: false
load_model: null
data:
  dir: /data/je/mimiciv/pre-processed
  data_filename: mimiciv_icd9_preprocessed.feather
  split_filename: mimiciv_icd9_split.feather
  code_column_names:
  - icd9_diag
  - icd9_proc
  max_length: 4000
dataset:
  name: BaseDataset
  configs: {}
dataloader:
  max_batch_size: 128
  batch_size: 8
  num_workers: 2
  drop_last: true
  batch_sampler:
    name: BySequenceLengthSampler
    configs:
      bucket_boundaries:
      - 400
      - 600
      - 800
      - 1000
      - 1200
      - 1400
      - 1600
      - 1800
      - 2000
      - 2200
      - 2600
      - 3000
      - 4000
model:
  name: VanillaConv
  configs:
    embed_dropout: 0
    num_filters: 500
    kernel_size: 4
text_encoder:
  name: Word2Vec
  file_name: word2vec_full.model
  load_model: true
  configs:
    min_document_count: 3
    model_configs:
      vector_size: 100
      min_count: 0
      workers: 4
      epochs: 5
trainer:
  epochs: 20
  validate_on_training_data: true
  print_metrics: false
  use_amp: true
  threshold_tuning: true
optimizer:
  name: AdamW
  configs:
    lr: 0.001
    weight_decay: 1.0e-05
lr_scheduler:
  name: linear
  configs:
    num_warmup_steps: 2000
label_transform:
  name: OneHotEncoder
  configs: {}
text_transform:
  name: TokenSequence
  configs:
    min_frequency: 3
metrics:
- name: F1Score
  configs:
    average: micro
    threshold: 0.5
- name: F1Score
  configs:
    average: macro
    threshold: 0.5
- name: Recall
  configs:
    average: micro
    threshold: 0.5
- name: Recall
  configs:
    average: macro
    threshold: 0.5
- name: Precision
  configs:
    average: micro
    threshold: 0.5
- name: Precision
  configs:
    average: macro
    threshold: 0.5
- name: FPR
  configs:
    average: micro
    threshold: 0.5
- name: FPR
  configs:
    average: macro
    threshold: 0.5
- name: ExactMatchRatio
  configs:
    threshold: 0.5
- name: Precision_K
  configs:
    k: 5
- name: Precision_K
  configs:
    k: 8
- name: Precision_K
  configs:
    k: 15
- name: Recall_K
  configs:
    k: 10
- name: Recall_K
  configs:
    k: 15
- name: MeanAveragePrecision
  configs: {}
- name: PrecisionAtRecall
  configs: {}
- name: AUC
  configs:
    average: micro
- name: AUC
  configs:
    average: macro
- name: LossMetric
  configs: {}
lookup:
  code_description:
    code_desc_path: null
    code_column: null
    desc_column: null
callbacks:
- name: WandbCallback
  configs:
    project: automatic-medical-coding
    entity: null
    dir: /data/je
- name: SaveBestModelCallback
  configs:
    split: val
    target: all
    metric: map
- name: EarlyStoppingCallback
  configs:
    split: val
    target: all
    metric: map
    patience: 6
data.max_length: 4000
